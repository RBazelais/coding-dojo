<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Make Some Noise</title>
        <script
    src="https://code.jquery.com/jquery-3.2.1.js"
    integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
    crossorigin="anonymous"></script>

            <!-- where the stuff goes down -->
        <script>
            var context = new (window.AudioContext || window.webkitAudioContext)();
            $(document).ready(function(){
                console.log("yo jQuery works");
                $('form').submit(function(e){
                    e.preventDefault();
                    var duration = $("input[name='duration']").val();
                    var frequency = $("input[name='frequency']").val();
                    $('#soundbank').append(buildSoundThing(frequency, duration));
                });

                function buildSoundThing(fre, dur) {
                    return "<div class='sound-thing'><p>" + fre +"</p><p>" + dur + "</p></div>";
                };

                // $(".sound-thing").click(function(){
                //     var freq = parseInt($(this).children().first().val());
                //     console.log(freq);
                //     var dur = parseint($(this).children().last().val());
                //     console.log(dur);
                //     var oscar = context.createOscillator();
                //     oscar.type = 'square';
                //     oscar.frequency.value = freq;
                //     oscar.connect(context.destination);
                //     oscar.start();
                //     setTimeout(function(){
                //         oscar.stop();
                //     }, dur);
                // });
                $("#soundbank").on("click", ".sound-thing", function(){
                    var freq = parseInt($(this).children().first().text());
                    console.log(freq);
                    var dur = parseInt($(this).children().last().text());
                    console.log(dur);
                    var oscar = context.createOscillator();
                    oscar.type = 'square';
                    oscar.frequency.value = freq;
                    oscar.connect(context.destination);
                    oscar.start();
                    setTimeout(function(){
                        oscar.stop();
                    }, dur);
                });
                ////////////

                $('#DiatonicScale').submit(function(e){
                    e.preventDefault();
                    var cMajorFreq = 1000;
                    var dMajorFreq = 1125;
                    var eMajorFreq = 1250;
                    var fMajorFreq = 1333;
                    var gMajorFreq = 1500;
                    var aMajorFreq = 1667;
                    var bMajorFreq = 1875;
                    var duration = 400;
                    $('#soundbank').append(buildSoundThing(cMajorFreq, duration));
                });

                $("#soundbank").on("click", ".sound-thing", function(){
                    var freq = 600;
                    console.log(freq);
                    var dur = 250;
                    console.log(dur);
                    var oscar = context.createOscillator();
                    oscar.type = 'square';
                    oscar.frequency.value = freq;
                    oscar.connect(context.destination);
                    oscar.start();
                    setTimeout(function(){
                        oscar.stop();
                    }, dur);
                });

            });
        </script>
        <style>
            #DiatonicScale{
                margin: auto;
                width: 100%;
                display: inline-block;
            }
            #C{
                display: inline-block;
                background-color: red;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #D{
                display: inline-block;
                background-color: orange;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #E{
                display: inline-block;
                background-color: yellow;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #F{
                display: inline-block;
                background-color: green;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #G{
                display: inline-block;
                background-color: blue;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #A{
                display: inline-block;
                background-color: navy;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            #B{
                display: inline-block;
                background-color: purple;
                height: 50px;
                width: 50px;
                margin: 20px;
            }
            button{
                display: block;
                padding: 5px 10px;
                background-color: lightgreen;
                margin: 0 20px;
            }
        </style>
    </head>
    <body>
        <div id="DiatonicScale">
            <div id="C"></div>
            <div id="D"></div>
            <div id="E"></div>
            <div id="F"></div>
            <div id="G"></div>
            <div id="A"></div>
            <div id="B"></div>
            <button type="submit" value ="play">play</button>
        </div>
        <form action="">
            <label for="frequency">Freq:</label>
            <input type="number" name="frequency" value="500">
            <label for="duration">Duration:</label>
            <input type="number" name="duration" value="250">
            <input type="submit" value="make noise!">
        </form>
        <div id="soundbank">

        </div>


    </body>
</html>
